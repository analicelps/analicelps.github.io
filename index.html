<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário</title>
    <style>
        body {
            font: bold 11pt Arial;
            background-color: rgba(123, 94, 198, 0.884);
            text-align: left;
            display: grid;
        }
    </style>
</head>
<body>
   <form id="formulario">
      <fieldset>
        <legend>Trabalhe conosco</legend>
        <div>
           <label for="nome">Nome:</label><br>
           <input type="text" name="nome" id="nome" placeholder="informe seu nome">
        </div>
        <div>
           <p>Vagas disponíveis</p>
           <br> <input type="radio" name="vagas" value="Dev Front-end JR">Dev Front-end JR<label></label>
            <input type="radio" name="vagas" value="Designer UI/UX">Designer UI/UX<label></label>
        </div>
        <div>
          <p>Habilidades</p>
           <br> <input type="checkbox" name="habilidades" value="HTML5">HTML5<label></label>
            <input type="checkbox" name="habilidades" value="Javascript">Javascript<label></label>
            <input type="checkbox" name="habilidades" value="Figma">Figma<label></label>
        </div>
        <div>
          <label for="id_textarea">Cursos:
            <textarea name="cursos_textarea" id="id_textarea" cols="30" rows="4"></textarea>
          </label>
        </div>
    </fieldset>
    <div>
    <button type="submit">Enviar</button>
    </div>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js";
      import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-database.js";
      import "https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js"; // Importação do módulo de autenticação

      const firebaseConfig = {
        apiKey: "AIzaSyAqNdDlNcrSX053xLT7SnsWOGmXLba2f9E",
        authDomain: "form2-bdeee.firebaseapp.com",
        projectId: "form2-bdeee",
        storageBucket: "form2-bdeee.appspot.com",
        messagingSenderId: "367886225761",
        appId: "1:367886225761:web:80af7833c80cefe2bc3520",
        measurementId: "G-C9T1RM8W36"
      };

      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const database = getDatabase();

      let form = document.getElementById("formulario");
      form.addEventListener("submit", (e) => {
        e.preventDefault(); 

        const nome = form["nome"].value;
        const vaga = form.querySelector('input[name="vagas"]:checked');
        const habilidades = Array.from(form.querySelectorAll('input[name="habilidades"]:checked')).map(function(checkbox) {
            return checkbox.value;
        });
        const curso = form["cursos_textarea"].value;
        
        if (!nome || !vaga || habilidades.length === 0) {
          alert("Por favor, preencha todos os campos obrigatórios.");
          return;
        }
        
        alert(`Nome: ${nome}\nVaga disponível: ${vaga.value}\nHabilidades: ${habilidades.join(', ')} \n\nCurso: ${curso}`);

        const usersRef = ref(database, "users");
        push(usersRef, {
          nome: nome,
          vaga: vaga.value,
          habilidades: habilidades,
          curso: curso
        })
          .then(() => {
            console.log("Dados enviados com sucesso!");
          })
          .catch((error) => {
            console.error("Erro ao enviar dados:", error);
          });
      });
    </script>
</body>
</html>
